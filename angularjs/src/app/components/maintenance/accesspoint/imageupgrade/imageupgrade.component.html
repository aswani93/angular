 <!--/======================/WORK AREA/======================/-->
 <div class="page-content-wrapper">
    <!-- <div class="row">
        <div class="col-lg-12 col-sm-12">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="javascript:void(0);">Maintenance</a></li>
                <li class="breadcrumb-item"><a href="javascript:void(0);">System</a></li>
                <li class="breadcrumb-item"><a href="javascript:void(0);">Upgrade</a></li>
                <li class="breadcrumb-item active">Upload</li>
            </ol>
        </div>
    </div> -->
   <div class="upgrade-tabs">
                    <ul class="tab-links">
                        <li class="active">
                            <a href="#tab1" (click)="tableStatus =  uploadTableStatus;upgradeTableStatus=false;checkboxVisibility=false;uploadTableStatus == true ? apModelVal = apModelStr:'';imageList();">Upload</a>
                        </li>
                        <li class="">
                            <a href="#tab2" (click)="tableStatus =  upgradeTableStatus;checkboxVisibility=true;upgradeTableStatus == true ? apModelVal = upgradeApModel:'';saveBtnStatus = false;imageList();">Upgrade</a>
                        </li>
                    </ul>
                    <div class="tab-content">
                        <div id="tab1" class="upgrade-tab active" style="display: block;">
                            <div class="form-group row">
                                <label class="col-md-2 col-form-label text-right">AP Model</label>
                                <div class="col-lg-2 col-sm-11">
                                    <select name="ap-model" class="form-control" [(ngModel)]="apModelStr" (ngModelChange)="onChangeModel($event,'upload');">
                                        <option *ngFor='let apModel of apModel'  [ngValue]="apModel" [selected]="apModel == apModelStr">{{apModel}}</option>
                                    </select>
                                </div>
                              <div>
                                <app-right-tooltip [toolTipText]="getToolTipText('access_point_upgrade_upload_ap_model')"></app-right-tooltip>
                              </div>

                            </div>
                            <div class="form-group row">
                                <label class="col-md-2 col-form-label text-right">Upload From</label>
                                <div class="col-lg-1 col-sm-11">
                                    <select name="ap-model" id="select-filter" class="form-control" [(ngModel)]="uploadType">
                                        <option value="ftp">FTP</option>
                                        <option value="local">Local</option>
                                    </select>
                                </div>
                              <div>
                                <app-right-tooltip [toolTipText]="getToolTipText('access_point_upgrade_upload_upload_from')"></app-right-tooltip>
                              </div>

                            </div>
                             <form [formGroup]="mailForm" id="mailForm" novalidate>
                            <div class="upload-ftp filter-content" id="ftp" #ftp >

                                <div class="form-group row">
                                    <label class="col-md-2 col-form-label text-right">Firmware File Name</label>
                                    <div class="col-lg-2 col-sm-11">
                                        <input type="text" id="firmware_id" class="form-control"  name="firmware" formControlName="firmware" [(ngModel)]="firmwareFileName" [placeholder]="firmplaceholder" (input)="checkStringName()" required>
                                        <div class="text-danger" *ngIf="mailForm.controls['firmware'].invalid && (mailForm.controls['firmware'].dirty || mailForm.controls['firmware'].touched)">
                                         <p *ngIf="mailForm.controls['firmware'].errors.required">Firmware file name is required</p>
                                             </div>
                                         <p class="text-danger" *ngIf="errorMsgShow && firmwareFileName.length > 0">Firmware file name is not valid</p>

                                         </div>

                                     <div>
                                  <app-right-tooltip
                                    [toolTipText]="getToolTipText('access_point_upgrade_upload_firmware_name')"></app-right-tooltip>
                                </div>
                                </div>
                                <div class="form-group row">
                                    <label class="col-md-2 col-form-label text-right">FTP Server</label>
                                    <div class="col-lg-5 col-sm-11">
                                        <ul class="radio-out">
                                            <li>
                                                <label>
                                                    <input type="radio" name="ftp-server" checked="">
                                                    <i>IPv4</i>
                                                    <span class="check">&nbsp;</span>
                                                </label>
                                            </li>
                                            <li>
                                                <label [class.button-disabled]="IPv6_radio_disabled">
                                                    <input type="radio" name="ftp-server">
                                                    <i>IPv6</i>
                                                    <span class="check">&nbsp;</span>
                                                </label>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                              <div class="form-group row">
                                <label class="col-md-2 col-form-label text-right">IP Address</label>
                                <div class="col-lg-2 col-sm-11">
                                  <input type="text" class="form-control ip_address" name="ipaddress"
                                         formControlName="IPaddress" [(ngModel)]="ip_address"
                                         [placeholder]="IPplaceholder" required (keyup)="validateIP()">
                                  <div class="text-danger"
                                       *ngIf="mailForm.controls['IPaddress'].invalid && (mailForm.controls['IPaddress'].dirty || mailForm.controls['IPaddress'].touched)">
                                    <p *ngIf="mailForm.controls['IPaddress'].errors.required">IP is required</p>
                                    <p *ngIf="mailForm.controls['IPaddress'].errors.pattern">Invalid IP address! </p>
                                  </div>
                                  <div *ngIf="iperrorStatus && mailForm.controls['IPaddress'].valid"
                                       class="text-danger pull-left">
                                    In-valid IP address.
                                  </div>
                                </div>
                                <div>
                                  <app-right-tooltip
                                    [toolTipText]="getToolTipText('access_point_upgrade_upload_ipaddress')"></app-right-tooltip>
                                </div>
                              </div>
                              <div class="form-group row">
                                <label class="col-md-2 col-form-label text-right">Username</label>
                                <div class="col-lg-2 col-sm-11">
                                  <input type="text" class="form-control" name="username" formControlName="userName"
                                         [(ngModel)]="userName" [placeholder]="userplaceholder" required>
                                  <div class="text-danger"
                                       *ngIf="mailForm.controls['userName'].invalid && (mailForm.controls['userName'].dirty || mailForm.controls['userName'].touched)">
                                    <p *ngIf="mailForm.controls['userName'].errors.required">Username is required</p>
                                  </div>
                                </div>
                                <div>
                                  <app-right-tooltip [toolTipText]="getToolTipText('access_point_upgrade_upload_username')"></app-right-tooltip>
                                </div>
                              </div>
                                <div class="form-group row">
                                  <label class="col-md-2 col-form-label text-right">Password</label>
                                  <div class="col-lg-2 col-sm-11">
                                    <div class="input-field">
                                      <input type="{{inputType}}" class="form-control" name="password"
                                             formControlName="password" [(ngModel)]="password"
                                             [placeholder]="passplaceholder" minlength="1" requird>
                                      <i class="icon icon-hide icon-right" (click)="passwordToggle(inputType)"></i>
                                    </div>
                                    <div class="text-danger"
                                         *ngIf="mailForm.controls['password'].invalid && (mailForm.controls['password'].dirty || mailForm.controls['password'].touched)">
                                      <p *ngIf="mailForm.controls['password'].errors.required">Password is required</p>

                                    </div>
                                  </div>
                                  <div>
                                    <app-right-tooltip
                                      [toolTipText]="getToolTipText('access_point_upgrade_upload_password')"></app-right-tooltip>
                                  </div>

                                </div>

                            </div>
                           <div class="upload-local filter-content" id="local" #local style="display: block;">
                                <div class="form-group row">
                                    <label class="col-md-2 col-form-label text-right">Upload File</label>
                                    <div class="col-lg-1 col-sm-11">
                                        <label class="btn btn-default" style="margin: 0;">
                                            Choose File
                                            <input type="file" accept=".tar.gz" hidden (change)="fileupload($event)" required>
                                        </label>
                                        <span class="fileSizeText">{{filename}}</span>
                                    </div>
                                  <app-right-tooltip
                                    [toolTipText]="getToolTipText('access_point_upgrade_upload_ap_image_fle_size')"></app-right-tooltip>
                                </div>
                                </div>
                            <div class="form-group row">
                                <div class="col-lg-6 col-sm-11 col-md-offset-4">
                                    <input type="reset" value="Reset" class="btn btn-cancel btn-large" (click)="reset()" style="margin-right: 15px;">
                                    <input type="submit"  value="Upload" class="btn btn-theme btn-large" data-toggle="modal" data-target="#upload" [disabled]="uploadType == 'ftp' ? (mailForm.invalid || apModelStr == 'Please select' || errorMsgShow): !(apModelStr != 'Please select' && filename != '')" (click)="openModalPopup()">
                                </div>
                            </div>
                              </form>

                            <!-- Modal -->
                            <div class="modal fade text-center" id="upload" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                                <div class="modal-dialog modal-dialog-centered" role="document">
                                    <div class="modal-content">
                                        <div classerrorMsgShow="modal-header">
                                            <h5 class="modal-title" id="exampleModalLongTitle">
                                                <label class="checkbox checkbox-theme" style="float: none;">
                                                    <input type="checkbox" [(ngModel)]="checkBool" (change)="checkedStatus($event)">
                                                    <div class="check"></div>
                                                </label>Click here to upgrade along with upload
                                            </h5>
                                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                <!--<span aria-hidden="true">×</span>-->
                                            </button>
                                        </div>
                                        <div class="modal-body" *ngIf="checkBool">
                                             <select name="group" id="group" [(ngModel)]="groupName" (change)="OnChangeGroupId($event.target.value);">
                                           <option *ngFor='let group of groups'  value="{{group.group_id}}" [selected]="group.group_id == groupName">{{group.group_name}}</option>
                                    </select>
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-blank" data-dismiss="modal">Cancel</button>
                                            <button type="button" class="btn btn-theme" data-dismiss="modal" (click)="confirmation__upload()">{{btnName}}</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div id="tab2" class="upgrade-tab" style="display: none;">
                          <div class="form-group row">
                            <label class="col-md-2 col-form-label text-right">Select By</label>
                            <div class="col-lg-1 col-sm-11">
                              <select name="select-by" id="select-filter-upgrade" class="form-control"
                                      [(ngModel)]="upgrade_type" (change)="onChangeGroupType($event.target.value)">
                                <option value="upgrade_group">Group</option>
                                <option value="upgrade_model">AP Model</option>
                              </select>
                            </div>

                            <div>
                              <app-right-tooltip [toolTipText]="getToolTipText('access_point_upgrade_upgrade_select_by')"></app-right-tooltip>
                            </div>
                          </div>
                          <div class="upgrade_group filter-content-upgrade" id="upgrade_group" #gp
                               style="display:block">
                            <div class="form-group row">
                              <label class="col-md-2 col-form-label text-right">Group Name</label>
                              <div class="col-lg-4 col-sm-11" *ngIf="groups_upgrade">
                                <select class="form-control" name="groups_upgrade" id="group" [(ngModel)]="upgradeGroupName"
                                        (change)="OnChangeUpgradeGroupId($event.target.value);">
                                  <option *ngFor='let group of groups_upgrade' value="{{group.group_id}}"
                                          [selected]="group.group_id == upgradeGroupName">{{group.group_name}}
                                  </option>
                                </select>
                              </div>
                              <div>
                                <app-right-tooltip [toolTipText]="getToolTipText('access_point_upgrade_upgrade_group_name')"></app-right-tooltip>
                              </div>
                            </div>
                            <div class="form-group row" [class.button-disabled]="upgradeGroupName != -1  ? false:true">
                              <label class="col-md-2 col-form-label text-right">AP Model</label>
                              <!--<div class="col-lg-2 col-sm-11">-->
                                  <!--<select name="ap-model" class="form-control">-->
                                      <!--<option value="group1">Z9T180h67</option>-->
                                  <!--</select>-->
                              <!--</div>-->

                              <div class="col-lg-2 col-sm-11">
                                <select name="ap-model" class="form-control" [(ngModel)]="upgradeApModel"
                                        (change)="onChangeModel($event.target.value,'upgrade');">
                                  <option *ngFor='let apModel of UpgradeModelList' value="{{apModel}}"
                                          [selected]="apModel == upgradeApModel">{{apModel}}
                                  </option>
                                </select>
                              </div>
                              <div>
                                <app-right-tooltip [toolTipText]="getToolTipText('access_point_upgrade_upgrade_ap_model')"></app-right-tooltip>
                              </div>
                            </div>
                          </div>
                              <div class="upgrade_model filter-content-upgrade" id="upgrade_model" #ap style="display:none">
                              <div class="form-group row">
                                <label class="col-md-2 col-form-label text-right">AP Model</label>
                                 <div class="col-lg-2 col-sm-11"  *ngIf = "apModel">
                                    <select name="ap-model" class="form-control" [(ngModel)]="upgradeApModel" (change)="onChangeUpgradeModel($event.target.value);">
                                        <option *ngFor='let apModel of apModel'  value="{{apModel}}" [selected]="apModel == upgradeApModel">{{apModel}}</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group row" [class.button-disabled]="upgradeApModel != 'Please select' ? false:true">
                                <label class="col-md-2 col-form-label text-right">Group Name</label>
                                <div class="col-lg-4 col-sm-11">
                                     <select class="form-control" name="group" id="group" [(ngModel)]="upgradeGroupName" (change)="OnChangeGroupId($event.target.value);">
                                           <option *ngFor='let group of UpgradeModelList'  value="{{group.group_id}}" [selected]="group.group_id == upgradeGroupName">{{group.group_name}}</option>
                                    </select>
                                </div>
                            </div>

                            </div>
                            <div class="form-group row">
                                <label class="col-md-2 col-form-label text-right"></label>
                                <div class="col-lg-5 col-sm-11">
                                    <!--<ul class="inline-check">
                                        <li>
                                            <label class="checkbox">
                                                <input type="checkbox">
                                                <div class="check"></div>
                                                <span>All APs</span>
                                            </label>
                                        </li>
                                        <li>
                                            <label class="checkbox" >
                                                <a  data-toggle="modal" data-target="#upgradetable">
                                                <input type="checkbox">
                                                <div class="check"></div>
                                                <span>Particular APs</span>
                                                </a>
                                            </label>
                                        </li>
                                    </ul>-->
                                    <ul class="radio-out">
                                            <li>
                                                <label>
                                                    <input type="radio" name="apis" [(ngModel)]="all_particular_apis" value="allApis" [checked]= "all_particular_apis == 'allApis' ? true:false" (change)="checkboxEvent($event,'allApi')">
                                                    <i>All APs</i>
                                                    <span class="check">&nbsp;</span>
                                                </label>
                                            </li>
                                            <li>
                                                <label>

                                                    <input type="radio" name="apis"  [(ngModel)]="all_particular_apis" value="particularApis" [checked]= "all_particular_apis == 'particularApis' ? true:false" (change)="checkboxEvent($event,'particularApi')">
                                                    <i>Particular APs</i>
                                                    <span class="check">&nbsp;</span>

                                                </label>
                                            </li>
                                        </ul>
                                </div>
                            </div>
                             <a data-toggle="modal" data-target="#upgradetable" #triggerEle></a>
                            <!-- Modal Upgrade Table -->

                            <div class="black-overlay" #overLay style="display:none"></div>

                            <div class="upTable" role="document" style="z-index:200;" *ngIf="Ap_model_bool_status">
                                                                <div class="modal-content">
                                        <div class="row">
                                            <div class="col-md-5 col-sm-5 col-xs-10">
                                                    <div class="searchBar">
                                                            <i class="icon icon-magnifying-glass"></i>
                                                            <input type="text" placeholder="Search" [(ngModel)]="queryString" id="search">
                                                        </div>
                                            </div>
                                            <div class="col-md-7 col-sm-7 col-xs-2">
                                                <div class="pull-right">
                                                    <a data-dismiss="modal" class="close" (click)="closePopup();$event.stopPropagation();">
                                                        <i class="icon icon-cancel"></i>
                                                    </a>
                                                </div>
                                            </div>

                                        </div>

                                        <div class="whitebg">
                                            <!--<div class="filterby">
                                                <i class="icon icon-filter"></i>
                                                Filter By
                                                <i class="icon icon-arrow-point-to-down"></i>
                                            </div>-->
                                             <div class="filterby dropdown pull-left">

                                                <div (click)="toogleDiv(toogleDiv_bool);">View By <i class="fa fa-angle-down"></i></div>
                                                <ul class="view-list radio-out" *ngIf="toogleDiv_bool">
                                                    <li>
                                                        <label>
                                                            <input type="radio" name="ftp-server" value="ap_name" [checked]="ap_type_id == 'ap_name'" (change)="selectAPType('ap_name')">
                                                            <i>AP Name</i>
                                                            <span class="check">&nbsp;</span>
                                                        </label>
                                                    </li>
                                                    <li>
                                                        <label>
                                                            <input type="radio" name="ftp-server" value="ap_mac" [checked]="ap_type_id == 'ap_mac'" (change)="selectAPType('ap_mac')">
                                                            <i>AP Mac</i>
                                                            <span class="check">&nbsp;</span>
                                                        </label>
                                                    </li>
                                                    <li>
                                                        <label>
                                                            <input type="radio" name="ftp-server" value="ap_ip" [checked]="ap_type_id == 'ap_ip'" (change)="selectAPType('ap_ip')">
                                                            <i>AP IP</i>
                                                            <span class="check">&nbsp;</span>
                                                        </label>
                                                    </li>
                                                  </ul>


                                            </div>
                                            <div class="clearfix"></div>
                                            <div class="cb-list">
                                                <div class="cb-list-title">
                                                    <label class="checkbox">
                                                        <input type="checkbox" (change)="selectAll($event)">
                                                        <div class="check"></div>
                                                        <span>AP List</span>
                                                    </label>

                                                </div>
                                                <div class="cb-list-body">

                                                        <div class="tab-wrap">
                                                       <div class="tab-cell" *ngFor="let mac of APModelList | FilterPipe : queryString">
                                                           <label class="checkbox">
                                                                <input type="checkbox" class="upgrade-check" value="{{mac.ap_mac}}" (change)="upgradecheckboxClick($event)">
                                                                <div class="check"></div>
                                                                <span>{{ap_type_id == 'ap_name' ? mac.ap_name : ap_type_id == 'ap_mac'?mac.ap_mac:mac.ap_ip }}</span>
                                                            </label>
                                                       </div>

                                                       <div class="clearfix"></div>
                                                   </div>
                                                </div>
                                            </div>
                                            <div class="modal-footer">
                                                <button type="button" class="btn btn-blank" data-dismiss="modal" (click)="closePopup();$event.stopPropagation();">Cancel</button>
                                                <button type="button" class="btn btn-theme" data-dismiss="modal"  (click)="check_mac_name();$event.stopPropagation();">Done</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            <!-- Modal Upgrade Table -->


                            <div class="form-group row">
                                <label class="col-md-2 col-form-label text-right">Upgrade Type</label>
                                <div class="col-lg-2 col-sm-11">
                                    <select name="upgrade-type" class="form-control" [(ngModel)] = "upgrade_time" (change)="upgradeTypeFun();">
                                        <option *ngFor='let upgradetime of upgradeTime'  value="{{upgradetime.value}}" [selected]="upgradetime.value == upgrade_time">{{upgradetime.value}}</option>
                                         </select>
                                </div>
                              <div>
                                <app-right-tooltip [toolTipText]="getToolTipText('access_point_upgrade_upgrade_upgrade_type')"></app-right-tooltip>
                              </div>
                            </div>
                             <div class="form-group row" *ngIf="upgrade_time == 'Schedule'">
                                <label class="col-md-2 col-form-label text-right">Schedule Profile</label>
                                <div class="col-lg-2 col-sm-11">
                                    <select name="upgrade-type" class="form-control" [(ngModel)] = "upgrade_time">
                                        <option *ngFor='let upgradetime of upgradeTime'  value="{{upgradetime.value}}" [selected]="upgradetime.value == upgrade_time">{{upgradetime.value}}</option>
                                         </select>
                                </div>
                            </div>
                            <div class="form-group row">
                                <div class="col-lg-6 col-sm-11 col-md-offset-4">
                                    <input type="reset" value="Reset" class="btn btn-cancel btn-large" (click)="upgradeReset()" style="margin-right: 15px;">
                                    <input type="submit" value="Save" class="btn btn-theme btn-large" [disabled]="upgradeGroupName == '-1' || upgradeApModel == 'Please select' || upgrade_time == 'Please select' || saveBtnStatus == true" (click)="saveUpgrade()">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

             <div class="row" *ngIf="tableStatus">
            <div class="col-lg-12 col-sm-12">
                <div class="portlet light bordered">
                    <div class="portlet-title">
                        <div class="caption">
                            <span *ngIf="checkboxVisibility">Upgrade</span>
                             <span *ngIf="!checkboxVisibility">Firmware List</span>
                        </div>
                    </div>
                    <div class="portlet-body">
                        <div class="tabcontent table-responsive" style="display: block; width: 75%;">
                            <table id="example" class="display theme table record_table table-striped table-sort text-center" cellspacing="0" width="100%">
                                <thead>
                                    <tr class="table-head">
                                        <th>
                                            <!--<label class="checkbox" (change)="selectFirmwareAll($event)">
                                                <input type="checkbox">
                                                <div class="check"></div>
                                            </label>-->
                                        </th>
                                        <th class="text-left">
                                            <span>Firmware Name
                                                <i class="down icon icon-download-arrow"></i>
                                                <i class="up icon icon-up-arrow-1"></i>
                                            </span>
                                        </th>
                                        <th class="text-center">
                                            <span>Uploaded By
                                                <i class="down icon icon-download-arrow"></i>
                                                <i class="up icon icon-up-arrow-1"></i>
                                            </span>
                                        </th>
                                        <th class="text-center">
                                            <span>Uploaded Time
                                                <i class="down icon icon-download-arrow"></i>
                                                <i class="up icon icon-up-arrow-1"></i>
                                            </span>
                                        </th>
                                         <th class="text-center" *ngIf="upgrade_time == 'Schedule'">
                                            <span>Schedule Time
                                                <i class="down icon icon-download-arrow"></i>
                                                <i class="up icon icon-up-arrow-1"></i>
                                            </span>
                                        </th>
                                    </tr>
                                </thead>
                                <tbody *ngIf="upgradeTableData && upgradeTableData.length > 0">
                                    <tr class="table-body" *ngFor='let upgradeData of upgradeTableData'>
                                        <td class="radio-out">
                                            <!--<label class="checkbox">
                                                <input type="checkbox" class="upgrade-firmware-check" (change)="upgradeFirmwareCheckboxClick($event)">
                                                <div class="check"></div>
                                            </label>-->
                                      <div style="position:relative">
                                      <label *ngIf="checkboxVisibility">
                                        <input type="radio" name="firmware"  (change)="upgradefirmwareName($event,upgradeData.firmware_name)">
                                        <span class="check">&nbsp;</span>
                                       </label>
                                      </div>
                                        </td>
                                        <td class="text-left">{{upgradeData.firmware_name}}</td>
                                        <td>{{upgradeData.uploaded_by}}</td>
                                        <td>
                                            <span class="time">{{upgradeData.uploaded_time}}</span>

                                        </td>
                                         <td *ngIf="upgrade_time == 'Schedule'">
                                            <span class="time">{{upgradeData.schedule_time}}</span>

                                        </td>
                                    </tr>

                                </tbody>
                                <tbody *ngIf="errorMsgStatus && upgradeTableData && upgradeTableData.length == 0">
                                 <tr>
                                     <td colspan="4">
                                      <div style="text-align: center;">No firmware image exist for selected Model</div>
                                      </td>
                                 </tr>
                                </tbody>
                            </table>
                            <div class="text-right" *ngIf="checkboxVisibility">
                                <a class="btn btn-theme" (click)="confirmation__upgrade();" [class.button-disabled]="errorMsgStatus || !image_name">Upgrade</a>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- /portlet-->
            </div>
        </div>

</div>
<!--/===/WORK AREA END/===/-->



